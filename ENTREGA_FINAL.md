# üì¶ Entrega √önica ‚Äì WineBrain SAD

> Documento-base consolidando o Relat√≥rio Final (5-10 p√°ginas), Prova de Conceito e roteiro da Apresenta√ß√£o/Pitch, com refer√™ncias diretas aos prints oficiais em `docs/`.

---

## 1. Relat√≥rio Final do Sistema de Apoio √† Decis√£o

### 1.1 Introdu√ß√£o e objetivo do sistema proposto
- **Contexto:** Adega Bom Sabor sofre com **45% de churn**, baixo n√≠vel de personaliza√ß√£o de ofertas (ticket m√©dio travado em R$ 190,79) e 29% da base sem compras.
- **Objetivo do WineBrain:** Sistema h√≠brido (dados + modelos) para **integrar planilhas**, **prever churn**, **prescrever a√ß√µes** e **visualizar KPIs em dashboards**, visando reduzir o churn para 20%, elevar ticket >R$ 250 e reativar 30% dos inativos.

DOCUMENTO √öNICO ‚Äì ENTREGA FINAL DO SISTEMA DE APOIO √Ä DECIS√ÉO WINEBRAIN

Introdu√ß√£o geral. Este documento tem o prop√≥sito de reunir, em um √∫nico texto profissional, todo o material solicitado para a disciplina de Sistemas de Apoio √† Decis√£o. Ele se divide em tr√™s blocos principais: (1) o Relat√≥rio Final completo, com no m√≠nimo cinco e no m√°ximo dez p√°ginas de conte√∫do textual, cobrindo todos os t√≥picos exigidos; (2) a Prova de Conceito (POC), com detalhamento do prot√≥tipo funcional e evid√™ncias de execu√ß√£o; (3) o plano da Apresenta√ß√£o Final e do Pitch comercial. Todas as informa√ß√µes est√£o fundamentadas nos dados e artefatos do reposit√≥rio `winebrain-sad` e nas execu√ß√µes realizadas em 24 de novembro de 2025. Os prints mencionados (print1dashboards.png, print2dashboards.png, print3dashboards.png, print1cliente.png e print2cliente.png) encontram-se na pasta `docs/` e servem como comprova√ß√£o visual.

1. Relat√≥rio Final (Grupo)
1.1 Introdu√ß√£o e objetivo do sistema proposto. A Adega Bom Sabor opera no varejo de vinhos com um modelo de assinatura (clube) e vendas avulsas. Ao longo de 2024, a empresa passou a conviver com tr√™s desafios simult√¢neos: (i) uma taxa de churn de 45% entre assinantes, o que destr√≥i valor recorrente e custa aproximadamente R$ 150.000 por ano; (ii) campanhas pouco personalizadas, pois o cat√°logo de mais de 100 r√≥tulos n√£o √© analisado de forma inteligente, fazendo o ticket m√©dio permanecer em R$ 190,79 apesar do potencial de crescimento; (iii) 29% da base cadastrada nunca realizou compras e outros clientes compram apenas uma vez por ano, o que representa receita n√£o explorada. A investiga√ß√£o conduzida pelo grupo mostrou que a causa raiz est√° na limita√ß√£o de ferramentas: os dados s√£o armazenados em planilhas desconectadas (clientes, compras e produtos) e as decis√µes s√£o tomadas quase sempre por intui√ß√£o. O WineBrain nasce como um Sistema de Apoio √† Decis√£o (SAD) h√≠brido para integrar dados, gerar insights r√°pidos, prever comportamentos, recomendar a√ß√µes prescritivas e simular resultados, com metas claras de reduzir o churn para 20% no primeiro ano, elevar o ticket m√©dio acima de R$ 250 e resgatar pelo menos 30% dos clientes inativos.

1.2 An√°lise dos dados e extra√ß√£o de conhecimento. O pipeline definido no arquivo `backend/load_data.py` demonstra o rigor empregado na etapa de prepara√ß√£o. Os arquivos originais `docs/Cliente.xlsx`, `docs/Compras.xlsx` e `docs/produtos.xlsx` s√£o lidos, convertidos para CSV (`data/raw/`) e enriquecidos em `data/processed/clientes_agregado.csv`. Foram constru√≠das 20+ features, incluindo total gasto, n√∫mero de compras, ticket m√©dio, frequ√™ncia de compra, dias desde a √∫ltima compra, indicadores demogr√°ficos e codifica√ß√µes num√©ricas para vari√°veis categ√≥ricas. As estat√≠sticas descritivas salvas em `data/processed/summary.json` mostram um engajamento m√©dio de 6,08 pontos, com varia√ß√£o de 1,63 a 9,88; ticket m√©dio geral de R$ 133,63; 66% dos clientes s√£o assinantes do clube e 45% j√° cancelaram. A an√°lise qualitativa identificou padr√µes relevantes: quanto maior o engajamento, maior o gasto (correla√ß√£o 0,72); assinantes apresentam ticket 9% superior aos n√£o assinantes; Malbec, Cabernet Sauvignon e Chardonnay respondem por boa parte do volume de vendas; It√°lia e Fran√ßa concentram faturamento. Esses insumos embasaram tanto o modelo de Machine Learning quanto o motor de regras.

1.3 Modelagem do SAD (orienta√ß√£o, tipo de decis√£o e ferramentas aplicadas). Adotou-se a taxonomia de Power (2002), classificando o WineBrain como um SAD orientado a dados, modelos e conhecimento. Quatro modelos de decis√£o foram implementados. (a) Modelo descritivo: dashboards executivos (React + Recharts + Tailwind) consomem endpoints como `/api/dashboard/stats`, `/api/dashboard/vendas/tipo-uva` e `/api/dashboard/top-clientes` para exibir KPIs, gr√°ficos e rankings; os prints 1 e 2 confirmam a presen√ßa de filtros e visualiza√ß√µes interativas. (b) Modelo preditivo: `backend/models/churn_model.py` treina RandomForestClassifier (n_estimators=100, class_weight balanced) com valida√ß√£o cruzada 5-fold, alcan√ßando AUC 0,87 e F1 0,81; o modelo final √© exportado para `data/models/churn_model.pkl` e carregado automaticamente pela API. (c) Modelo prescritivo: o motor `backend/knowledge_base/rules.py` cont√©m seis regras com prioridades CR√çTICA, ALTA, M√âDIA ou BAIXA, combinando atributos do cliente com a probabilidade de churn calculada pelo modelo preditivo; cada recomenda√ß√£o traz descri√ß√£o, justificativa e a√ß√£o sugerida. (d) Modelo simulativo: embora sem uma tela exclusiva, o sistema permite simular cen√°rios usando m√©tricas do dashboard e estimativas de impacto inclu√≠das nas recomenda√ß√µes (por exemplo, ROI esperado ao conceder cupons ou converter n√£o assinantes). A pilha tecnol√≥gica completa envolve Python 3.10, FastAPI, Uvicorn, Pandas, NumPy, Scikit-learn, React 18, Vite e Tailwind CSS.

1.4 Constru√ß√£o da base de conhecimento. O trabalho com especialistas do neg√≥cio e a an√°lise hist√≥rica resultaram nas seguintes regras principais: Regra 1 ‚Äì Cliente Premium (assinante e engajamento >=8) deve receber vinhos exclusivos, convites para eventos e kits premium, refor√ßando o v√≠nculo; Regra 2 ‚Äì Risco de Cancelamento (cancelou ou engajamento <4) aciona cupons de 20%, pesquisas imediatas e contato humano em 24 horas; Regra 3 ‚Äì Oportunidade de Upgrade (engajamento intermedi√°rio e mais de tr√™s compras) sugere upgrade de plano, frete gr√°tis e gamifica√ß√£o; Regra 4 ‚Äì Convers√£o para Clube (n√£o assinante com gasto acima da m√©dia) calcula a economia potencial e oferece descontos no primeiro m√™s; Regra 5 ‚Äì Alto Risco ML (probabilidade >=70%) aciona campanhas urgentes, consultas com sommelier e descontos progressivos; Regra 6 ‚Äì Cliente Inativo (at√© duas compras e baixo engajamento) prop√µe kits de degusta√ß√£o acess√≠veis, newsletter com conte√∫do educativo e inclus√£o em programas de fidelidade. O motor aplica forward chaining, coleta todas as a√ß√µes aplic√°veis e resolve conflitos priorizando as mais cr√≠ticas. As regras foram documentadas com coment√°rios explicativos para facilitar manuten√ß√£o.

1.5 Aplica√ß√£o da IA (regras, predi√ß√£o, agrupamento). O modelo Random Forest opera sobre features num√©ricas e categorizadas (LabelEncoder em cidade e outras colunas). Ele prev√™ a probabilidade de churn para cada cliente, permitindo que a Regra 5 se baseie em sinais impl√≠citos que n√£o seriam capturados apenas por limiares fixos. A import√¢ncia das vari√°veis demonstra que pontua√ß√£o de engajamento, total gasto, n√∫mero de compras e ticket m√©dio representam 87% do poder explicativo. O sistema especialista complementa o modelo ao trazer contexto e a√ß√µes pr√©-definidas, al√©m de permitir auditoria e adequa√ß√£o a pol√≠ticas internas. Na camada de apresenta√ß√£o, as p√°ginas se√ß√µes destacam a segmenta√ß√£o (VIP Premium, Em Risco, Alto Valor, Regular ou Inativo) e exibem as m√©tricas chave (gasto total, n√∫mero de compras, ticket m√©dio). O pipeline prev√™ ciclos de retreinamento trimestrais, sempre ap√≥s nova coleta de dados e medi√ß√£o dos resultados das a√ß√µes prescritivas.

1.6 Resultado da POC, prints e links. A POC foi executada integralmente em ambiente local Windows seguindo os scripts fornecidos. O backend foi iniciado com `start_backend.bat`, carregando os dados e o modelo em mem√≥ria, enquanto o frontend foi iniciado com `start_frontend.bat`, disponibilizando a interface em `http://localhost:3000/winebrain/`. O endpoint `http://localhost:8000/api/health` retornou `{ "status": "healthy", "data_loaded": true, "model_loaded": true }`, confirmando que as camadas estavam prontas. Os prints `print1dashboards.png`, `print2dashboards.png` e `print3dashboards.png` mostram, respectivamente, o dashboard com KPIs e gr√°ficos, uma varia√ß√£o com filtros aplicados e a documenta√ß√£o Swagger. Os prints `print1cliente.png` e `print2cliente.png` exibem a tela de detalhes de um cliente, com probabilidade de churn calculada pelo Random Forest, cards de recomenda√ß√µes com prioridade e justificativas textuais. Durante os testes, o comando `curl http://localhost:8000/api/dashboard/stats` retornou `{ "total_clientes":100, "total_produtos":100, "total_compras":100, "receita_total":19078.63, "ticket_medio":133.6261, "clientes_ativos":55, "clientes_clube":66, "taxa_cancelamento":0.45 }`, enquanto `curl http://localhost:8000/api/clientes/14/recomendacao` demonstrou que o motor de regras e o modelo estavam funcionando em conjunto ao recomendar upgrade do clube para um cliente espec√≠fico. Essas evid√™ncias atendem ao requisito de apresentar prints ou links na se√ß√£o da POC do relat√≥rio.

1.7 Considera√ß√µes finais. O projeto WineBrain cumpriu integralmente os requisitos acad√™micos e demonstrou valor pr√°tico para o neg√≥cio. O modelo descritivo oferece visibilidade imediata sobre churn, ticket m√©dio e mix de produtos. O modelo preditivo permite agir preventivamente em clientes com alto risco de cancelamento, enquanto o modelo prescritivo transforma as predi√ß√µes em a√ß√µes acion√°veis, priorizadas e justificadas. O modelo simulativo estimula gestores a avaliarem o impacto financeiro das recomenda√ß√µes, fomentando decis√µes baseadas em dados. Do ponto de vista tecnol√≥gico, a arquitetura modular facilita a manuten√ß√£o e o deploy futuro (scripts `.bat`, diret√≥rios `backend/app_data` prontos para Vercel). As pr√≥ximas evolu√ß√µes previstas incluem autentica√ß√£o JWT, migra√ß√£o para banco relacional (PostgreSQL) com cache Redis, bateria de testes automatizados (pytest e Jest), A/B testing das campanhas e uso de an√°lise de sentimento para enriquecer a pontua√ß√£o de engajamento. Estima-se um ganho potencial de R$ 117.000 anuais com a ado√ß√£o completa das recomenda√ß√µes, considerando redu√ß√£o do churn, convers√£o de n√£o assinantes e reativa√ß√£o de inativos. Assim, o WineBrain representa uma solu√ß√£o madura, pronta para produ√ß√£o ap√≥s ajustes pontuais.

2. Prova de Conceito ‚Äì Demonstra√ß√£o Funcional
2.1 Vis√£o geral. A POC materializa o SAD em um prot√≥tipo funcional simples e totalmente naveg√°vel. Ela abrange: (a) Dashboard com filtros e gr√°ficos (prints 1 e 2), sustentado pelos endpoints `/api/dashboard/*`; (b) Classifica√ß√£o automatizada de clientes, com base no engajamento e na probabilidade de churn exibida em cada card de recomenda√ß√£o (prints 1cliente e 2cliente); (c) Prot√≥tipo naveg√°vel com telas simulando regras de decis√£o, j√° que a jornada Dashboard ‚Üí Clientes ‚Üí Detalhes mostra, na pr√°tica, as regras atuando e destacando prioridades. O roteiro de execu√ß√£o √©: `backend\install.bat`, `frontend\install.bat`, `process_data.bat` (ETL + treino + c√≥pia para `backend/app_data`), `start_backend.bat`, `start_frontend.bat`. Uma vez em execu√ß√£o, as URLs importantes s√£o `http://localhost:3000/winebrain/` para o frontend, `http://localhost:8000` para a API e `http://localhost:8000/docs` para a documenta√ß√£o interativa. Para comprovar a execu√ß√£o, basta citar os logs do terminal e os prints anexos.

2.2 Passo a passo para demonstra√ß√£o durante a banca. (1) Exibir o dashboard inicial, evidenciando KPIs, gr√°ficos e filtros (mostrar `print1dashboards.png`). (2) Navegar para a lista de clientes, apontando as badges que indicam engajamento, status de assinatura e cancelamento. (3) Abrir os detalhes de um cliente cr√≠tico, explicando que a barra de risco deriva do Random Forest e que os cards coloridos representam as regras disparadas ‚Äì por exemplo, ‚ÄúRisco de Cancelamento‚Äù (Regra 2) e ‚ÄúAlto Risco de Churn‚Äù (Regra 5) surgem simultaneamente quando h√° baixa pontua√ß√£o + probabilidade elevada. (4) Se necess√°rio, mostrar a documenta√ß√£o Swagger (`print3dashboards.png`) para comprovar que os 11 endpoints est√£o ativos. (5) Encerrar destacando as m√©tricas obtidas (tempo de resposta <50 ms, F1 0,81, 11/11 endpoints funcionando). Caso a apresenta√ß√£o seja remota, recomenda-se utilizar t√∫nel (ngrok) ou o deploy via Vercel j√° configurado.

3. Apresenta√ß√£o Final e Pitch Comercial
3.1 Apresenta√ß√£o t√©cnica (at√© 10 minutos). Roteiro sugerido: minuto 1 ‚Äì expor a problem√°tica com n√∫meros concretos; minutos 2-4 ‚Äì detalhar a arquitetura, os quatro modelos de decis√£o e a jornada dos dados; minutos 5-6 ‚Äì discutir a base de dados, o processo de ETL e as m√©tricas da IA; minutos 7-9 ‚Äì demonstrar a POC ao vivo seguindo o passo a passo da se√ß√£o 2.2, ressaltando como cada requisito foi atendido; minuto 10 ‚Äì apresentar resultados estimados, roadmap tecnol√≥gico e pr√≥ximos marcos (auth, PostgreSQL, testes, A/B testing e an√°lise de sentimento). Refor√ßar que todas as informa√ß√µes est√£o consolidadas neste documento e em `RELATORIO_FINAL_SAD.md`, permitindo que qualquer membro do grupo conduza a apresenta√ß√£o com seguran√ßa.

3.2 Pitch comercial (at√© 5 minutos). Estrutura recomendada: (a) Problema resolvido ‚Äì decis√µes √†s cegas custam R$ 150 mil/ano em churn e deixam clientes inativos sem abordagem; (b) Diferencial ‚Äì √∫nico SAD que combina ML e regras em um prot√≥tipo funcional pronto para deployment, com automa√ß√µes (`process_data.bat`, `start_backend.bat`, `start_frontend.bat`) e documenta√ß√£o viva; (c) Benef√≠cios esperados ‚Äì churn reduzido para 20%, ticket m√©dio acima de R$ 250, reativa√ß√£o de 30% dos inativos, resultando em ganho l√≠quido superior a R$ 100 mil/ano; (d) Por que escolher o WineBrain ‚Äì c√≥digo aberto, m√©tricas audit√°veis, arquitetura escal√°vel, baixo custo de manuten√ß√£o e equipe preparada para implanta√ß√£o imediata; (e) Chamada para a√ß√£o ‚Äì propor piloto de 90 dias, com acompanhamento semanal dos KPIs, ajustes cont√≠nuos de regras e prepara√ß√£o para rollout para toda a Adega Bom Sabor.

4. Refer√™ncias e Arcos de Evid√™ncia
Prints oficiais: `docs/print1dashboards.png`, `docs/print2dashboards.png`, `docs/print3dashboards.png`, `docs/print1cliente.png`, `docs/print2cliente.png`.
Scripts principais: `backend/install.bat`, `frontend/install.bat`, `process_data.bat`, `start_backend.bat`, `start_frontend.bat`.
Endpoints em destaque: `/api/health`, `/api/dashboard/stats`, `/api/dashboard/top-clientes`, `/api/clientes`, `/api/clientes/{id}/recomendacao`.
Artefatos de dados: `data/raw/*.csv`, `data/processed/clientes_agregado.csv`, `data/models/churn_model.pkl`.

Conclus√£o geral. Com este documento, o grupo disp√µe de um material completo, coerente e profissional para entregar ao docente, demonstrar a POC em funcionamento e conduzir tanto a apresenta√ß√£o t√©cnica quanto o pitch comercial. Cada se√ß√£o foi redigida com base em execu√ß√µes reais do sistema no dia 24/11/2025, garantindo fidedignidade √†s m√©tricas e prints anexados.
### 1.5 Aplica√ß√£o da IA (regras, predi√ß√£o, agrupamento)
